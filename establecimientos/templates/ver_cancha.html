{% extends 'base.html' %}

{% load static %}


{% block title %}{{ cancha.nombre }} - SportsNet{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/ver_cancha.css' %}">
{% endblock %}

{% block content %}
<div class="detalle-cancha-container">
  

  <div class="cancha-header">
    <div class="cancha-info">
      <h1 class="cancha-titulo">{{ cancha.nombre }}</h1>
      <p class="cancha-subtitulo">Pertenece al establecimiento : {{ cancha.establecimiento.nombre }}</p>
             
      <div class="info-grid">
        <div class="info-item">
          <div class="info-label">Deporte</div>
          <div class="info-valor">{{ cancha.get_deporte_display }}</div>
        </div>

        <div class="info-item">
          <div class="info-label">Superficie</div>
          <div class="info-valor">{{ cancha.get_superficie_display }}</div>
        </div>

        <div class="info-item">
          <div class="info-label">Iluminación</div>
          <div class="info-valor">{{ cancha.iluminacion }}</div>
        </div>

        <div class="info-item">
          <div class="info-label">Tipo</div>
          <div class="info-valor">
            {% if cancha.interior %}
              Interior 
            {% else %}
              Exterior - Aire libre
            {% endif %}
          </div>
        </div>

      </div>

      
      <div class="info-item" style="border-left-color: #10b981;">
        <div class="info-label">Precio por bloque (30 min)</div>
        <div class="precio-destaque">${{ cancha.valor_por_bloque }}</div>
      </div>
<br>
      
        {% if es_dueno %}
          <div class="botones-dueno">
            <a href="{% url 'establecimientos:editar_cancha' cancha.id %}" class="btn-editar-cancha">Editar</a>
            <a href="{% url 'establecimientos:eliminar_cancha' cancha.id %}" class="btn-eliminar-cancha">Eliminar</a>
          </div>
        {% endif %}
    </div>

    
    <div class="comodidades">
      <div class="comodidades-titulo">Información del establecimiento</div>
      <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #374151; font-size: 0.9rem; color: #9ca3af;"></div>
      
      <div class="comodidad-item">
        <span class="comodidad-icon">
          {% if cancha.establecimiento.estacionamiento_disponible %}Estacionamiento disponible{% else %}Sin estacionamiento{% endif %}
        </span>
      </div>

      <div class="comodidad-item">
        <span class="comodidad-icon">
          {% if cancha.establecimiento.camarines_disponible %}Camarines disponibles{% else %}Sin camarines{% endif %}
        </span>
      </div>

      <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #374151; font-size: 0.9rem; color: #9ca3af;">
        <strong>Dirección:</strong><br>
        {{ cancha.establecimiento.direccion }}
      </div>

      <div style="margin-top: 1rem; font-size: 0.9rem; color: #9ca3af;">
        <strong>Contacto:</strong>
        <br>
        {{ cancha.establecimiento.telefono_contacto }}
        <br>
        {{ cancha.establecimiento.correo_contacto }}
     </div>
     
     <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #374151; font-size: 0.9rem; color: #9ca3af;">
        <a href="{% url 'establecimientos:ver_establecimiento' establecimiento=cancha.establecimiento.id %}" class="nav-button">Ver detalles del establecimiento</a>
     </div>
    </div>
  </div>

  <div class="horarios-section">
    <h2 class="seccion-titulo">Horario del establecimiento</h2>

    {% if horarios %}
      <div class="horarios-grid">
        {% for item in horarios %}
          {% if item.horario %}
            <div class="dia-horario">
              <div class="dia-nombre">{{ item.horario.get_dia_display }}</div>
              <div class="horario-item">
                <span class="horario-label">Apertura:</span>
                <span class="horario-valor">{{ item.horario.hora_apertura|time:"H:i" }}</span>
              </div>
              <div class="horario-item">
                <span class="horario-label">Cierre:</span>
                <span class="horario-valor">{{ item.horario.hora_cierre|time:"H:i" }}</span>
              </div>
            </div>
          {% else %}
            <div class="dia-horario">
              <div class="dia-nombre">{{ item.dia }}</div>
              <div class="sin-horario-texto">Cerrado</div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    {% else %}
      <div class="advertencia">
        El establecimiento no ha añadido horarios
      </div>
    {% endif %}

  </div>

  
  <div style="background: #1f2937; border: 1px solid #374151; border-radius: 0.75rem; padding: 1.5rem;">
    <h3 style="color: #60a5fa; margin-bottom: 1rem;">Hacer Reserva</h3>
    
    {% if horarios %}
      <p style="color: #d1d5db; margin-bottom: 1rem;">
        Para reservar, selecciona una fecha que tenga horario disponible. 
        Solo puedes reservar dentro de los horarios del establecimiento.
      </p>
      
      <div class="botones-reserva">
        {% if user.is_authenticated %}
          <a href="{% url 'reservas:crear_reserva' cancha.id %}" class="btn btn-reservar">
            Hacer Reserva
          </a>
        {% else %}
          <a href="{% url 'cuentas:login_cuenta' %}" class="btn btn-reservar">
            Inicia sesión para reservar
          </a>
        {% endif %}
        
        <a href="{% url 'establecimientos:ver_establecimiento' cancha.establecimiento.id %}" class="btn btn-volver">
          Volver
        </a>
      </div>
    {% else %}
      <div class="advertencia">
        No se pueden hacer reservas sin horarios disponibles
      </div>
      
      <div class="botones-reserva">
        <a href="{% url 'cuentas:home' %}" class="btn btn-volver">
          Volver
        </a>
      </div>
    {% endif %}
  </div>

</div>

{% endblock %}