{% extends 'base.html' %}
{% load static %}

{% block title %}Editar Reserva - SportsNet{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'editar_reserva.css' %}">
{% endblock %}

{% block contenido %}

<div class="editar-reserva-container">
  <h1 class="titulo">Editar Reserva</h1>

  <div class="info-reserva">
    <div class="info-item">
      <span class="label">Cancha:</span>
      <span class="valor">{{ reserva.cancha.nombre }}</span>
    </div>
    <div class="info-item">
      <span class="label">Establecimiento:</span>
      <span class="valor">{{ reserva.cancha.establecimiento.nombre }}</span>
    </div>
  </div>

  <form method="POST" novalidate>
    {% csrf_token %}

    <div class="form-group">
      <label for="{{ form.fecha.id_for_label }}">{{ form.fecha.label }}</label>
      {{ form.fecha }}
      {% if form.fecha.errors %}<span class="error">{{ form.fecha.errors.0 }}</span>{% endif %}
    </div>

    <div class="form-group">
      <label for="{{ form.hora_inicio.id_for_label }}">{{ form.hora_inicio.label }}</label>
      {{ form.hora_inicio }}
      {% if form.hora_inicio.errors %}<span class="error">{{ form.hora_inicio.errors.0 }}</span>{% endif %}
    </div>

    <div class="form-group">
      <label for="{{ form.duracion_bloques.id_for_label }}">{{ form.duracion_bloques.label }}</label>
      {{ form.duracion_bloques }}
      {% if form.duracion_bloques.errors %}<span class="error">{{ form.duracion_bloques.errors.0 }}</span>{% endif %}
    </div>

    <div class="form-group">
      <label for="{{ form.comentario.id_for_label }}">{{ form.comentario.label }}</label>
      {{ form.comentario }}
      {% if form.comentario.errors %}<span class="error">{{ form.comentario.errors.0 }}</span>{% endif %}
    </div>

    {% if es_dueno_cancha %}
      <div class="form-group">
        <label for="estado">Estado</label>
        <select name="estado" id="estado">
          <option value="PENDIENTE" {% if reserva.estado == 'PENDIENTE' %}selected{% endif %}>Pendiente</option>
          <option value="CONFIRMADA" {% if reserva.estado == 'CONFIRMADA' %}selected{% endif %}>Confirmada</option>
          <option value="COMPLETADA" {% if reserva.estado == 'COMPLETADA' %}selected{% endif %}>Completada</option>
          <option value="CANCELADA" {% if reserva.estado == 'CANCELADA' %}selected{% endif %}>Cancelada</option>
        </select>
      </div>
    {% endif %}

    <div class="botones">
      <button type="submit" class="btn btn-guardar">Guardar Cambios</button>
      <a href="{% url 'reservas:listar_reservas' %}" class="btn btn-volver">Cancelar</a>
    </div>
  </form>
</div>

{% endblock %}